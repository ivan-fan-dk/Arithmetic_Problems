const currentVersion="1.4.10",h13=document.getElementById("h13");h13.appendChild(document.createElement("h1")),h13.appendChild(document.createElement("h3")),changeName("#h13 h1",arithmetricProblemsTitleName),changeName("#h13 h3",versionName+": "+currentVersion);const defaultNOQ="20",defaultRight_after=!0,versions=["1.3.0","1.2.0","1.1.4","1.1.3","1.1.2","1.1.1","1.1.0","1.0.2","1.0.0"];var alertIPhoneHasDone=!1,result;let scoreList;var printTime;const body=document.querySelector("body"),right_after=document.getElementById("right_after"),checkAnswer=document.getElementById("checkAnswer"),score=document.getElementById("score"),setCookies=document.getElementById("setCookies"),checkCookies=document.getElementById("checkCookies"),clearCookies=document.getElementById("clearCookies"),timeTrial=document.getElementById("timeTrial"),header_h1=document.querySelector("header h1"),time=document.getElementById("time"),stop=document.getElementById("stop"),submit=document.getElementById("submit"),reset=document.getElementById("reset"),options=document.querySelectorAll("options"),backgroundColor=["#cbffcd","#ffe1c8"],closeButton=document.getElementById("close"),navigationMenu=document.getElementById("navigationMenu"),navigationBar=document.getElementById("navigationBar"),overlay=document.querySelector(".overlay"),once={once:!0},currentTime=document.getElementById("currentTime");setInterval((()=>{currentTime.textContent=(new Date).toLocaleString()}),50);const NOQ=document.querySelector("#NOQ"),NOQs=[10,20,30,40,50,100],difficulty=document.querySelector("#difficulty"),calculationType=document.querySelector("#calculationType"),settings=["NOQ","difficulty","right_after"].concat(calculationTypes);for(let e of versions){let t=navigationMenu.appendChild(document.createElement("li")),n=t.appendChild(document.createElement("a"));n.href=inAFolder+`./Arithmetic_Problems v.${e}/index.html`,n.textContent=versionName+` ${e}`}function closeNavigationMenu(){navigationMenu.style.outline="none",navigationMenu.style.width="0",overlay.classList.remove("open")}function openNavigationMenu(){navigationMenu.style.outline="solid thin black",navigationMenu.style.width="20%",overlay.classList.add("open")}closeButton.addEventListener("click",closeNavigationMenu),navigationBar.addEventListener("click",openNavigationMenu);for(let e of NOQs){let t=NOQ.appendChild(document.createElement("option"));t.id=`NOQ_${e}`,t.value=String(e),t.textContent=String(e)}for(let e of difficulties){let t=difficulty.appendChild(document.createElement("option"));t.id=e,t.value=e,t.textContent=e,e===AsianName&&(t.hidden=!0)}for(let e of calculationTypes){let t=calculationType.appendChild(document.createElement("label"));t.htmlFor=e;let n=t.appendChild(document.createElement("div"));n.className="customizeTitle",n.textContent=e;let i=n.appendChild(document.createElement("input"));i.className="checkbox",i.type="checkbox",i.name=e,i.id=e}let typeCheck=[],mode;for(let e of Array(calculationTypes.length).keys())typeCheck.push(!0);function normalMode(){mode=0,changeBackgroundColor(),right_after.disabled=!1,stop.hidden=!0,right_after.checked?checkAnswer.hidden=!0:checkAnswer.hidden=!1,timeTrial.addEventListener("click",timeTrialClickInNormalMode,once)}function timeTrialMode(){mode=1,changeBackgroundColor(),right_after.disabled=!0,stop.hidden=!0,timeTrial.addEventListener("click",timeTrialClickInTimeTrialMode,once)}function generate(){changeBackgroundColor(),clearQuestions();for(let e of Array(calculationTypes.length).keys())getChecked(calculationTypes[e])?typeCheck[e]=!0:typeCheck[e]=!1;if(JSON.stringify(typeCheck)==JSON.stringify(Array(calculationTypes.length).fill(!1)))return;peek.hidden=!0;let e=getOption("difficulty"),t=Number(getOption("NOQ")),n=[];for(let e of Array(typeCheck.length).keys())typeCheck[e]&&n.push(e);var i=[];for(let e of Array(t).keys()){let e=Math.floor(Math.random()*n.length);i.push(n[e])}class o{constructor(e,t,n=t){this.question=e,this.answer=t,this.printOutAnswer=n}}Qlist=[];let r,l=!1,a=!1,c=!1;for(let n of Array(t).keys())if(0===i[n]){let t,n,i,r;e===difficulties[0]?(i=10,r=10):e===difficulties[1]?(i=30,r=30):e===difficulties[2]?(i=50,r=50):e===difficulties[3]?(i=100,r=100):e===difficulties[4]?(i=1e3,r=1e3):e===difficulties[5]&&(i=1e4,r=1e4),l?(t=Math.floor(Math.random()*(i-1))+1,n=Math.floor(Math.random()*(r-1))+1):(t=Math.floor(Math.random()*i),n=Math.floor(Math.random()*r)),0!=t&&0!=n||(l=!0),Qlist.push(new o(`\\(${t} + ${n} = \\)`,Number(t+n)))}else if(1===i[n]){let t,n;e===difficulties[0]?(t=10,n=10):e===difficulties[1]?(t=30,n=30):e===difficulties[2]?(t=50,n=50):e===difficulties[3]?(t=100,n=100):e===difficulties[4]?(t=1e3,n=1e3):e===difficulties[5]&&(t=1e4,n=1e4);let i=Math.floor(Math.random()*t),r=Math.floor(Math.random()*n);i<r&&(e===difficulties[0]||e===difficulties[1])&&([i,r]=switchVariablesValues(i,r)),Qlist.push(new o(`\\(${i} - ${r} = \\)`,Number(i-r)))}else if(2===i[n]){let t,n,i,r;if(e===difficulties[0]?(i=5,r=5):e===difficulties[1]?(i=10,r=10):e===difficulties[2]?(i=20,r=20):e===difficulties[3]?(i=50,r=50):e===difficulties[4]?(i=100,r=100):e===difficulties[5]&&(i=1e3,r=1e3),a)c?(t=Math.floor(Math.random()*(i-2))+2,n=Math.floor(Math.random()*(r-2))+2):(t=Math.floor(Math.random()*(i-1))+1,n=Math.floor(Math.random()*(r-1))+1);else if(c)do{let e=[0].concat([...Array(i-2).keys()].map((e=>e+2)));t=e[Math.floor(Math.random()*e.length)],n=e[Math.floor(Math.random()*e.length)]}while(0==t&&0==n);else do{t=Math.floor(Math.random()*i),n=Math.floor(Math.random()*r)}while(0==t&&0==n);0!=t&&0!=n||(a=!0),1!=t&&1!=n||(c=!0),1===Math.floor(2*Math.random())&&([t,n]=switchVariablesValues(t,n)),Qlist.push(new o(`\\(${t} \\times ${n} = \\)`,Number(t*n)))}else if(3===i[n]){let t;e===difficulties[0]?t=20:e===difficulties[1]?t=50:e===difficulties[2]?t=80:e===difficulties[3]?t=100:e===difficulties[4]?t=1e3:e===difficulties[5]&&(t=1e5);let n,i=[];for(;0===i.length;)n=Math.floor(Math.random()*t),i=properFactors(n);let r=i[Math.floor(Math.random()*i.length)];Qlist.push(new o(`\\(${n} \\div ${r} = \\)`,Number(n/r)))}else if(4===i[n]){let t,n,i,r,l,a,c,s,u,d,f,m,h=Math.floor(2*Math.random());if(e===difficulties[0]?(t=10,n=10):e===difficulties[1]?(t=20,n=20):e===difficulties[2]?(t=10,n=10):e===difficulties[3]?(t=20,n=20):e===difficulties[4]?(t=100,n=100):e===difficulties[5]&&(t=1e3,n=1e3),e===difficulties[0]||e===difficulties[1])[i,l,r,a]=twoFractionsWithSameDenominator(t,n);else do{[i,l,c]=fraction(t,n,proper=!1),[r,a,s]=fraction(t,n,proper=!1)}while(c&&s);[u,d]=l.split("/"),[f,m]=a.split("/"),[u,d,f,m]=[Number(u),Number(d),Number(f),Number(m)],0===h?Qlist.push(new o(`\\( ${i} + ${r} = \\)`,(u*m+d*f)/(d*m),reduceFraction(u*m+d*f,d*m))):1===h&&(u*m-d*f<0&&(e===difficulties[0]||e===difficulties[1])&&([i,r]=switchVariablesValues(i,r),[l,a]=switchVariablesValues(l,a),[u,f]=switchVariablesValues(u,f),[d,m]=switchVariablesValues(d,m)),Qlist.push(new o(`\\( ${i} - ${r} = \\)`,(u*m-d*f)/(d*m),reduceFraction(u*m-d*f,d*m))))}else if(5===i[n]){let t,n,i,r,l,a,c,s,u,d,f,m,h=Math.floor(2*Math.random());e===difficulties[0]?(t=5,n=5):e===difficulties[1]?(t=10,n=10):e===difficulties[2]?(t=20,n=20):e===difficulties[3]?(t=50,n=50):e===difficulties[4]?(t=100,n=100):e===difficulties[5]&&(t=1e3,n=1e3);do{[i,l,c]=fraction(t,n,proper=!1),[r,a,s]=fraction(t,n,proper=!1)}while(c&&s);[u,d]=l.split("/"),[f,m]=a.split("/"),[u,d,f,m]=[Number(u),Number(d),Number(f),Number(m)],0===h?Qlist.push(new o(`\\( ${i} \\times ${r} = \\)`,u*f/(d*m),reduceFraction(u*f,d*m))):1===h&&Qlist.push(new o(`\\( ${i} \\div ${r} = \\)`,u*m/(d*f),reduceFraction(u*m,d*f)))}else if(6===i[n]){let t,n,i=[],r=[],l=[],a="<br>\\(x=\\)";e===difficulties[0]?(t=[1,5],r=[[1,5],[-5,5]]):e===difficulties[1]?(t=[1,10],r=[[1,10],[-10,10]]):e===difficulties[2]?(t=[-5,5],r=[[-5,5],[-10,10]]):e===difficulties[3]?(t=[-10,10],r=[[-10,10],[-10,10]]):e===difficulties[4]?(t=[-30,30],r=[[-30,30],[-100,100]]):e===difficulties[5]&&(t=[-100,1e3],r=[[-100,100],[-100,100]]);do{n=Math.floor(Math.random()*(t[1]-t[0]+1))+t[0]}while(0==n);for(let e of Array(2).keys()){let t;do{t=Math.floor(Math.random()*(r[e][1]-r[e][0]+1))+r[e][0]}while(0==t);i.push(t),t>0?l.push("+"):l.push("-")}i.push(n*i[0]+i[1]),1!=i[0]&&-1!=i[0]||(i[0]=String(i[0]).slice(0,-1));let c="";e===difficulties[0]||e===difficulties[1]||0==Math.floor(2*Math.random())?("+"==l[1]&&(c="+"),Qlist.push(new o(`\\( ${i[0]}x ${c} ${i[1]} = ${i[2]} \\)`+a,n))):("+"==l[0]&&(c="+"),Qlist.push(new o(`\\( ${i[1]} ${c} ${i[0]}x = ${i[2]} \\)`+a,n)))}else if(7===i[n]){let t,n,i,r=[],l=[];e===difficulties[0]?(n=[[1,5],[1,5]],i=[1,1]):e===difficulties[1]?(n=[[1,10],[1,10]],i=[1,1]):e===difficulties[2]?(n=[[-5,5],[-5,5]],i=[-1,1]):e===difficulties[3]?(n=[[-5,5],[-5,5]],i=[-5,5]):e===difficulties[4]?(n=[[-10,10],[-10,10]],i=[-5,5]):e===difficulties[5]&&(n=[[-10,10],[-10,10]],i=[-10,10]);for(let e of Array(2).keys()){do{t=Math.floor(Math.random()*(n[e][1]-n[e][0]+1))+n[e][0]}while(0==t);r.push(t)}r[0]>r[1]&&([r[0],r[1]]=switchVariablesValues(r[0],r[1]));do{t=Math.floor(Math.random()*(i[1]-i[0]+1))+i[0]}while(0==t);l.push(t),l.push(-(r[0]+r[1])*l[0]),l.push(r[0]*r[1]*l[0]);let a=[];for(let e of Array(2).keys())l[e+1]<0?a.push(""):a.push("+");for(let e of[0,1])1!=l[e]&&-1!=l[e]||(l[e]=String(l[e]).slice(0,-1));let c=`${l[1]}x`;0===l[1]&&(c="",a[0]=""),Qlist.push(new o(`\\( ${l[0]} x^2 ${a[0]}`+c+`${a[1]} ${l[2]} = 0 \\)`,r))}r=Number.isInteger(t/4)?t/4:Math.floor(t/4)+1;for(let e of Array(4).keys()){let n=document.getElementById(`section_${e}`),o=n.appendChild(document.createElement("ol"));for(j of(o.type="1",o.start=r*e+1,Array(r).keys()))if(r*e+j<t){let t=o.appendChild(document.createElement("li"));if(7!=i[r*e+j]){t.innerHTML=Qlist[r*e+j].question+" ";let n=t.appendChild(document.createElement("input"));n.className="questionbox",n.autocomplete="off",n.name="userinput",n.id=`Q_${r*e+j}`,n.type="text",4==i[r*e+j]||5==i[r*e+j]?n.inputMode="text":n.inputMode="numeric",t.appendChild(document.createElement("img")).hidden=!0}else{t.innerHTML=Qlist[r*e+j].question+"<br>";for(let n of Array(2).keys()){let i=t.appendChild(document.createElement("span"));i.textContent=0==n?"\\(x_{1}=\\) ":"\\(,x_{2}=\\) ";let o=t.appendChild(document.createElement("input"));o.className="questionboxForQuadraticEquation",o.autocomplete="off",o.name="userinput",o.id=`Q_${r*e+j}_${n}`,o.type="text",o.inputMode="numeric";let l=t.appendChild(document.createElement("img"));l.id=`img_${r*e+j}_${1-n}`,l.hidden=!0}}}n.hidden=!1}document.querySelectorAll("#questions input").forEach((e=>{e.addEventListener("keydown",(t=>{if("Enter"==t.key){let n,o=e.id.split("_"),r=o[1];if(t.shiftKey)if(3===o.length){if(1===Number(o[2]))n=document.getElementById(`Q_${r}_0`);else{let e=Number(o[1])-1;n=7===i[e]?document.getElementById(`Q_${e}_1`):document.getElementById(`Q_${e}`)}}else{let e=Number(o[1])-1;n=7===i[e]?document.getElementById(`Q_${e}_1`):document.getElementById(`Q_${e}`)}else if(3===o.length){if(0===Number(o[2]))n=document.getElementById(`Q_${r}_1`);else{let e=Number(o[1])+1;n=7===i[e]?document.getElementById(`Q_${e}_0`):document.getElementById(`Q_${e}`)}}else{let e=Number(o[1])+1;n=7===i[e]?document.getElementById(`Q_${e}_0`):document.getElementById(`Q_${e}`)}n&&n.focus()}else if(("ArrowDown"==t.key||"ArrowUp"==t.key)&&(t.preventDefault(),!t.repeat)){let t=e.parentElement.appendChild(document.createElement("span"));t.className="spanMath";let n=e.value;if(""!=n){let e=!0;if(n.includes("/")){for(let t of n)"0123456789/-.".includes(t)||(e=!1);e&&(s=n.split("/"),2==s.length&&(n="-"==n[0]?`-\\frac{${s[0].slice(1)}}{${s[1]}}`:`\\frac{${s[0]}}{${s[1]}}`))}t.innerHTML=" \\("+n+"\\)",MathJax.typeset([t]),window.addEventListener("keyup",(function(){let e=document.getElementsByClassName("spanMath");for(let t of e)t.parentElement.removeChild(t)}))}}}))})),MathJax.typeset(),scoreList=new Array(t);for(let e=0;e<t;++e)scoreList[e]=0;scoreUpdate(),answerCheck(),1===mode&&(clearInterval(printTime),stop.hidden=!1,timer()),isIPhone()&&!alertIPhoneHasDone&&(alert(alertIPhoneMessage),alertIPhoneHasDone=!0)}function answerCheck(){let e=document.querySelectorAll("#questions input");for(let t of e)t.addEventListener("contextmenu",(async function(e){e.preventDefault(),getAnswer(t)}));if(right_after.checked&&0===mode){checkAnswer.hidden=!0;for(let t of e)t.addEventListener("input",(async function(){isIPhone()&&"00"==t.value.slice(0,2)&&(t.value="-"+t.value.slice(2)),await sleep(1),answerResponse(t),correctHurray()}))}else{checkAnswer.hidden=1===mode;for(let t of e)t.addEventListener("input",(async function(){isIPhone()&&"00"==t.value.slice(0,2)&&(t.value="-"+t.value.slice(2))}));checkAnswer.addEventListener("click",(async function(){for(let t of e)answerResponse(t);correctHurray()}))}}function correctHurray(){result==Number(getOption("NOQ"))&&confettiCannon()}function getAnswer(e){let t=e.id.split("_"),n=Number(t[1]);if(2==t.length){let t=e.parentElement.querySelector("img");e.value=String(Qlist[n].printOutAnswer),imgQuestion(t),scoreList[n]=0}else{let i=Number(t[2]),o=document.getElementById(`img_${n}_${i}`);e.value=String(Qlist[n].printOutAnswer[i]),imgQuestion(o),scoreList[n][i]=0}scoreUpdate()}function answerResponse(e){let t,n,i=e.value,o=e.id.split("_"),r=Number(o[1]);if(2===o.length)img=e.parentElement.querySelector("img"),n=inputCheck(i,img,r);else if(3===o.length){t=Number(o[2]);let e=document.getElementById(`img_${r}_${t}`),l=document.getElementById(`Q_${r}_${1-t}`).value,a=document.getElementById(`img_${r}_${1-t}`),[c,s]=[inputCheck(i,e,r),inputCheck(l,a,r)];Qlist[r].answer.includes(Number(i))&&Qlist[r].answer.includes(Number(l))&&Number(i)==Number(l)&&Qlist[r].answer[0]!=Qlist[r].answer[1]&&(imgCorrect(a),imgWrong(e),[c,s]=[0,.5]),n=[c,s]}scoreList[r]=n,scoreUpdate()}function inputCheck(userInput,img,Q_Number,singleScore=0){let invalidInput=!1;if(""===userInput)img.hidden=!0;else if(userInput===spareMe)imgCorrect(img),singleScore=1;else{let nonNumber="/-.";for(var i of Array(userInput.length).keys()){if(!"0123456789/-.".includes(userInput[i]))return imgWarning(img),invalidInput=!0,singleScore;if(nonNumber.includes(userInput[i])&&nonNumber.includes(userInput[i+1])&&("/"!=userInput[i]||"-"!=userInput[i+1]||!"0123456789".includes(userInput[i+2])))return imgWarning(img),invalidInput=!0,singleScore}let minusSignCount=countOneChar("-",userInput),firstMinusSign="-"==userInput[0],slashMinusincluded=userInput.includes("/-");if(1==minusSignCount&&!firstMinusSign&&!slashMinusincluded||2==minusSignCount&&(!firstMinusSign||!slashMinusincluded)||minusSignCount>2)return imgWarning(img),invalidInput=!0,singleScore;if(!invalidInput)if(userInput.includes("/")){let str=userInput.split("/");2===str.length&&0!=str[0].length&&0!=str[1]?eval(userInput)===Qlist[Q_Number].answer?(imgCorrect(img),singleScore=1):imgWrong(img):imgWarning(img)}else 2===Qlist[Q_Number].answer.length?Qlist[Q_Number].answer.includes(Number(userInput))?(imgCorrect(img),singleScore=.5):imgWrong(img):Number(userInput)===Qlist[Q_Number].answer?(imgCorrect(img),singleScore=1):imgWrong(img)}return singleScore}function imgCorrect(e){e.hidden=!1,e.src=inAFolder+"./static/accept.png",e.alt="Correct"}function imgWrong(e){e.hidden=!1,e.src=inAFolder+"./static/cross.png",e.alt="Wrong"}function imgWarning(e){e.hidden=!1,e.src=inAFolder+"./static/warning.png",e.alt="Invalid"}function imgQuestion(e){e.hidden=!1,e.src=inAFolder+"./static/common-answers.png",e.alt="Explore further"}function getOption(e){return selectElement=document.getElementById(e),selectElement.value}function getChecked(e){return selectElement=document.getElementById(e),selectElement.checked}function sleep(e){return new Promise((t=>setTimeout(t,1e3*e)))}function clearQuestions(){let e=document.querySelectorAll(".section");for(let t of e)t.hidden=!0;let t=document.querySelectorAll(".section ol");if(null!=t)for(var n of t)n.remove();score.hidden=!0,peek.hidden=!1,clearInterval(printTime),setTimeToZero(),stop.hidden=!0,checkAnswer.hidden=!0,0===mode?time.hidden=!0:1===mode?time.hidden=!1:captureUnexpected("clearQuestions")}function properFactors(e){let t=[];for(let n of[...Array(Math.floor(Math.sqrt(e))).keys()].map((e=>e+2)))e%n==0&&(!t.includes(n)&&n>=2&&n!=e&&t.push(n),!t.includes(e/n)&&n>=2&&n!=e&&t.push(e/n));return t}function factors(e){let t=[];for(let n of[...Array(Math.floor(Math.sqrt(e))).keys()].map((e=>e+1)))e%n==0&&(!t.includes(n)&&n>=1&&t.push(n),!t.includes(e/n)&&n>=1&&t.push(e/n));return t}function commonFactors(e,t){let n=[],i=factors(e),o=factors(t);for(var r of i)o.includes(r)&&n.push(r);return n}function reduceFraction(e,t){if(0===t&&0!==e)return alert("Cannot reduce the fraction, because denominator is zero!");let n,i=!1;e<0&&(e=-e,i=!i),t<0&&(t=-t,i=!i);let o=commonFactors(e,t);if(0==o.length)return"0";let r=Math.max(...o);n=1==i?"-":"";let l=e/r,a=t/r;return 1==a?n+String(l):n+`${l}/${a}`}function fraction(e,t,n=!1){let i,o;do{o=Math.floor(Math.random()*e)+1,i=n?[...Array(t-o+1).keys()].map((e=>e+o)).filter((e=>1===commonFactors(o,e).length)):[...Array(t).keys()].map((e=>e+1)).filter((e=>1===commonFactors(o,e).length))}while(0==i.length);return b=i[Math.floor(Math.random()*i.length)],1===b?[String(o),String(`${o}/${b}`),!0]:[`\\frac{${o}}{${b}}`,String(`${o}/${b}`),!1]}function twoFractionsWithSameDenominator(e,t){let n,i;i=Math.floor(Math.random()*(t-1))+2,n=[...Array(e).keys()].map((e=>e+1)).filter((e=>1===commonFactors(i,e).length));var[o,r]=[n[Math.floor(Math.random()*n.length)],n[Math.floor(Math.random()*n.length)]];return[`\\frac{${o}}{${i}}`,String(`${o}/${i}`),`\\frac{${r}}{${i}}`,String(`${r}/${i}`)]}function switchVariablesValues(e,t){return[t,e]}function setCookie(e,t,n=exDays){const i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);let o="expires="+i.toUTCString();document.cookie=String(e)+"="+String(t)+";"+o+";Secure"}function clearAllCookies(e){let t=e.split(";");for(let e of t){setCookie(e.split("=")[0],"",0)}0===document.cookie.length?alert(alertCookiesCleared):alert(alertMostCookiesCleared+`\n${document.cookie}`)}function checkACookieExists(e){return!!document.cookie.split(";").some((t=>t.trim().startsWith(`${e}=`)))}function loadCookie(){clearSelected();let e=!1,t=!1,n=!1,i=new Array(calculationTypes.length).fill(!1);for(let o of document.cookie.split(";")){let[r,l]=o.split("=").map((e=>e.trim()));"NOQ"===r?(document.getElementById(`NOQ_${l}`).selected=!0,e=!0):"difficulty"===r?(document.getElementById(l).selected=!0,t=!0):"right_after"===r?("true"===l?document.getElementById("right_after").checked=!0:"false"===l?document.getElementById("right_after").checked=!1:cookieDeprecationAlert("right_after"),n=!0):calculationTypes.includes(r)&&("true"===l?document.getElementById(r).checked=!0:"false"===l?document.getElementById(r).checked=!1:cookieDeprecationAlert(r),i[calculationTypes.indexOf(r)]=!0)}!1===e&&(document.getElementById(`NOQ_${defaultNOQ}`).selected=!0),!1===t&&(document.getElementById(defaultDifficulty).selected=!0),!1===n&&(document.getElementById("right_after").checked=defaultRight_after);for(let e of calculationTypes)0==i[calculationTypes.indexOf(e)]&&(defaultCalculationTypes.includes(e)?document.getElementById(e).checked=!0:document.getElementById(e).checked=!1)}function cookieDeprecationAlert(e){alert("Warning!!! Cookies has been deprecated!!!")}function clearSelected(){for(var e of options)e.selected=!1}function scoreUpdate(){result=0;for(let e of scoreList)if(2==e.length)for(let t=0;t<2;++t)result+=e[t];else result+=e;score.textContent=scoreName+`: ${result}/${getOption("NOQ")}`,score.hidden=!1}function captureUnexpected(e){alert("An unexpected situation has been captured!")}function pad(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function timeTrialClickInNormalMode(){header_h1.textContent=timeTrialModeName,time.hidden=!1,setTimeToZero(),timeTrial.value=returnToNormalModeName,clearInterval(printTime),timeTrialMode()}function timeTrialClickInTimeTrialMode(){header_h1.textContent=arithmetricProblemsTitleName,time.hidden=!0,timeTrial.value=timeTrialModeName,normalMode()}function setTimeToZero(){time.textContent=timeName+": 00:00.0"}function stopper(){clearInterval(printTime),stop.hidden=!0,checkAnswer.hidden=!1}function changeBackgroundColor(){let e=document.getElementsByClassName("section");for(let t of e)t.style.backgroundColor=backgroundColor[mode]}function timer(){var e=(new Date).getTime();printTime=setInterval((function(){var t=(new Date).getTime()-e,n=pad(Math.floor(t%36e5/6e4),2),i=pad(Math.floor(t%6e4/1e3),2),o=pad(Math.floor(t%1e3/100),1);time.textContent=timeName+`: ${n}:${i}.${o}`}),100),stop.addEventListener("click",stopper,once)}function confettiCannon(){var e={origin:{y:.75}};function t(t,n){confetti(Object.assign({},e,n,{particleCount:Math.floor(200*t)}))}t(.25,{spread:26,startVelocity:55}),t(.2,{spread:60}),t(.35,{spread:100,decay:.91,scalar:.8}),t(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),t(.1,{spread:120,startVelocity:45})}loadCookie(),setCookies.addEventListener("click",(()=>{setCookie("NOQ",getOption("NOQ")),setCookie("difficulty",getOption("difficulty")),setCookie("right_after",String(getChecked("right_after")));for(let e of calculationTypes)getChecked(e)?setCookie(e,"true"):setCookie(e,"false");alert(alertPreferencesStored+`\n${document.cookie}`)})),checkCookies.addEventListener("click",(()=>{alert(preferencesCheck+`\n${document.cookie}`)})),clearCookies.addEventListener("click",(()=>{clearAllCookies(document.cookie)})),normalMode(),submit.addEventListener("click",generate),window.addEventListener("DOMContentLoaded",(function(){snow(),body.classList.toggle("shown")}),!1),reset.addEventListener("click",clearQuestions);const repeat=(e,t)=>[].concat(...Array(t).fill(e));function countOneChar(e,t){let n=0;for(let i of t)e==i&&(n+=1);return n}function isIPhone(){return!!navigator.userAgent.includes("iPhone")}function randomInRange(e,t){return Math.random()*(t-e)+e}var duration=17e3,animationEnd=Date.now()+duration,skew=1;function randomColor(){let e=["#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"];return e[Math.floor(Math.random()*e.length)]}function snow(){var e=animationEnd-Date.now(),t=Math.max(200,e/duration*500);skew=Math.max(.8,skew-.001),confetti({particleCount:1,startVelocity:0,ticks:t,origin:{x:Math.random(),y:Math.random()*skew-.2},colors:["#ffffff"],shapes:["circle"],gravity:randomInRange(.4,.6),scalar:randomInRange(.4,1),drift:randomInRange(-.4,.4)}),e>0&&requestAnimationFrame(snow)}